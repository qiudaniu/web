<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>首页</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="../../bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <!-- Google fonts - Popppins for copy-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,800">
    <!-- orion icons-->
    <link rel="stylesheet" href="../../css/orionicons.css">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="../../css/style.default.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="../../public/css/custom.css">
    <!-- Favicon-->
    <link rel="shortcut icon" href="../../img/favicon.png?3">
    <!-- Tweaks for older IEs-->
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <script type="text/javascript">
        if (! localStorage.getItem('admin-token')) {
            window.location.href = '../login.html';
        }
    </script>
</head>
<body>
<header class="header">
    <nav class="navbar navbar-expand-lg px-4 py-2 bg-white shadow"><a href="#" class="sidebar-toggler text-gray-500 mr-4 mr-lg-5 lead"><i class="fas fa-align-left"></i></a><a href="#" class="navbar-brand font-weight-bold text-uppercase text-base">后台管理系统</a>
        <ul class="ml-auto d-flex align-items-center list-unstyled mb-0">
            <li class="nav-item dropdown ml-auto"><a id="userInfo" href="http://example.com" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-link dropdown-toggle"><img src="../../img/avatar-6.jpg" alt="Jason Doe" style="max-width: 2.5rem;" class="img-fluid rounded-circle shadow"></a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item"
                       onclick="exit()">
                        退出
                    </a>
                </div>
            </li>
        </ul>
    </nav>
</header>
<div class="d-flex align-items-stretch">
    <div id="sidebar" class="sidebar py-3">
        <div class="text-gray-400 text-uppercase px-3 px-lg-4 py-4 font-weight-bold small headings-font-family">主页</div>
        <ul class="sidebar-menu list-unstyled">
            <li class="sidebar-list-item"><a href="#" data-toggle="collapse" data-target="#user" aria-expanded="false" aria-controls="pages" class="sidebar-link text-muted"><i class="o-wireframe-1 mr-3 text-gray"></i><span>用户</span></a>
                <div id="user" class="collapse">
                    <ul class="sidebar-menu list-unstyled border-left border-primary border-thick">
                        <li class="sidebar-list-item"><a href="../user/index.html" class="sidebar-link text-muted pl-lg-5">用户列表</a></li>
                        <li class="sidebar-list-item"><a href="../user/create.html" class="sidebar-link text-muted pl-lg-5">新增用户</a></li>
                    </ul>
                </div>
            </li>
            <li class="sidebar-list-item"><a href="#" data-toggle="collapse" data-target="#admin" aria-expanded="false" aria-controls="pages" class="sidebar-link text-muted"><i class="o-wireframe-1 mr-3 text-gray"></i><span>管理员</span></a>
                <div id="admin" class="collapse">
                    <ul class="sidebar-menu list-unstyled border-left border-primary border-thick">
                        <li class="sidebar-list-item"><a href="../admin/index.html" class="sidebar-link text-muted pl-lg-5">管理员列表</a></li>
                        <li class="sidebar-list-item"><a href="../admin/create.html" class="sidebar-link text-muted pl-lg-5">新增管理员</a></li>
                    </ul>
                </div>
            </li>
            <li class="sidebar-list-item"><a href="#" data-toggle="collapse" data-target="#goods" aria-expanded="false" aria-controls="pages" class="sidebar-link text-muted"><i class="o-wireframe-1 mr-3 text-gray"></i><span>商品</span></a>
                <div id="goods" class="collapse">
                    <ul class="sidebar-menu list-unstyled border-left border-primary border-thick">
                        <li class="sidebar-list-item"><a href="../goods/index.html" class="sidebar-link text-muted pl-lg-5">商品列表</a></li>
                        <li class="sidebar-list-item"><a href="../goods/create.html" class="sidebar-link text-muted pl-lg-5">新增商品</a></li>
                    </ul>
                </div>
            </li>
            <li class="sidebar-list-item"><a href="#" data-toggle="collapse" data-target="#goodsType" aria-expanded="false" aria-controls="pages" class="sidebar-link text-muted"><i class="o-wireframe-1 mr-3 text-gray"></i><span>商品类型</span></a>
                <div id="goodsType" class="collapse">
                    <ul class="sidebar-menu list-unstyled border-left border-primary border-thick">
                        <li class="sidebar-list-item"><a href="../goodsType/index.html" class="sidebar-link text-muted pl-lg-5">商品类型列表</a></li>
                        <li class="sidebar-list-item"><a href="../goodsType/create.html" class="sidebar-link text-muted pl-lg-5">新增商品类型</a></li>
                    </ul>
                </div>
            </li>
            <li class="sidebar-list-item"><a href="#" data-toggle="collapse" data-target="#orders" aria-expanded="false" aria-controls="pages" class="sidebar-link text-muted"><i class="o-wireframe-1 mr-3 text-gray"></i><span>订单</span></a>
                <div id="orders" class="collapse">
                    <ul class="sidebar-menu list-unstyled border-left border-primary border-thick">
                        <li class="sidebar-list-item"><a href="../orders/index.html" class="sidebar-link text-muted pl-lg-5">订单列表</a></li>
                        <li class="sidebar-list-item"><a href="../orders/create.html" class="sidebar-link text-muted pl-lg-5">新增订单</a></li>
                    </ul>
                </div>
            </li>
            <li class="sidebar-list-item"><a href="#" data-toggle="collapse" data-target="#express" aria-expanded="false" aria-controls="pages" class="sidebar-link text-muted"><i class="o-wireframe-1 mr-3 text-gray"></i><span>快递商</span></a>
                <div id="express" class="collapse">
                    <ul class="sidebar-menu list-unstyled border-left border-primary border-thick">
                        <li class="sidebar-list-item"><a href="../express/index.html" class="sidebar-link text-muted pl-lg-5">快递商列表</a></li>
                        <li class="sidebar-list-item"><a href="../express/create.html" class="sidebar-link text-muted pl-lg-5">新增快递商</a></li>
                    </ul>
                </div>
            </li>
            <li class="sidebar-list-item"><a href="#" data-toggle="collapse" data-target="#role" aria-expanded="false" aria-controls="pages" class="sidebar-link text-muted"><i class="o-wireframe-1 mr-3 text-gray"></i><span>角色</span></a>
                <div id="role" class="collapse">
                    <ul class="sidebar-menu list-unstyled border-left border-primary border-thick">
                        <li class="sidebar-list-item"><a href="../roles/index.html" class="sidebar-link text-muted pl-lg-5">角色列表</a></li>
                        <li class="sidebar-list-item"><a href="../roles/create.html" class="sidebar-link text-muted pl-lg-5">新增角色</a></li>
                    </ul>
                </div>
            </li>
            <li class="sidebar-list-item"><a href="#" data-toggle="collapse" data-target="#operation" aria-expanded="false" aria-controls="pages" class="sidebar-link text-muted"><i class="o-wireframe-1 mr-3 text-gray"></i><span>操作</span></a>
                <div id="operation" class="collapse">
                    <ul class="sidebar-menu list-unstyled border-left border-primary border-thick">
                        <li class="sidebar-list-item"><a href="../operations/index.html" class="sidebar-link text-muted pl-lg-5">操作列表</a></li>
                        <li class="sidebar-list-item"><a href="../operations/create.html" class="sidebar-link text-muted pl-lg-5">新增操作</a></li>
                    </ul>
                </div>
            </li>
            <li class="sidebar-list-item"><a href="#" data-toggle="collapse" data-target="#data" aria-expanded="false" aria-controls="pages" class="sidebar-link text-muted"><i class="o-wireframe-1 mr-3 text-gray"></i><span>数据统计</span></a>
                <div id="data" class="collapse">
                    <ul class="sidebar-menu list-unstyled border-left border-primary border-thick">
                        <li class="sidebar-list-item"><a href="../statistics/index.html" class="sidebar-link text-muted pl-lg-5">系统数据统计</a></li>
                    </ul>
                </div>
            </li>
            
        </ul>
    </div>
    <div class="page-holder w-100 d-flex flex-wrap">
        <div class="container-fluid px-xl-5">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-header">
                        <h6 class="text-uppercase mb-0">用户列表</h6>
                    </div>
                    <div class="card-body">
                        <table class="table table-striped table-sm card-text">
                            <thead>
                            <tr>
                                <th>#</th>
                                <th>用户名</th>
                                <th>邮箱</th>
                                <th>地址</th>
                                <th>电话</th>
                                <th>操作</th>
                            </tr>
                            </thead>
                            <tbody>
                                
                            </tbody>
                        </table>
                </div>
            </div>
        </div>
    </div>

    <!-- 模态框   信息删除确认 -->
    <div class="modal fade" id="delcfmOverhaul">
        <div class="modal-dialog">
            <div class="modal-content message_align">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"
                            aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                    <h4 class="modal-title">提示</h4>
                </div>
                <div class="modal-body">
                    <!-- 隐藏需要删除的id -->
                    <input type="hidden" id="deleteHaulId" />
                    <p>您确认要删除该条信息吗？</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default"
                            data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary"
                            id="deleteHaulBtn">确认</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->

    </div>
</div>
<!-- JavaScript files-->
<script src="../../vendor/jquery/jquery.min.js"></script>
<script src="../../vendor/popper.js/umd/popper.min.js"> </script>
<script src="../../vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="../../vendor/jquery.cookie/jquery.cookie.js"> </script>
<script src="../../vendor/chart.js/Chart.min.js"></script>
<script src="../../js/js.cookie.min.js"></script>
<script src="../../js/charts-home.js"></script>
<script src="../../js/front.js"></script>

<script>

    // $("#user-list").hide();
    $("#deleteHaulBtn").click(function() {
        user_id = $("#deleteHaulId").val();
        $.ajax({
            url:'http://qiudaniu.top:5002/bazinga/api/user/deleteUserById?userId=' + user_id,
            type:"get",
            headers: {
                'admin_token': localStorage.getItem('admin-token')
            },
            dataType:"json",
            success:function(e){
                if(e.code == 200){
                    window.location.reload()
                }
            },
            fail:function(e){
                alert(e.message)
                
            }
        });
    });

    function showEditModal(id) {
        $("#deleteHaulId").val(id);// 将模态框中需要删除的大修的ID设为需要删除的ID
        window.location.href = "edit.html?id=" + id;
    }
    function showDeleteModal(id) {
        $("#deleteHaulId").val(id);// 将模态框中需要删除的大修的ID设为需要删除的ID
        $("#delcfmOverhaul").modal({
            backdrop: 'static',
            keyboard: false
        });
    }

    $.ajax({
            'type':'get',
            'url': 'http://qiudaniu.top:5002/bazinga/api/user/getAllUsers',
            'headers' : {
                'admin_token': localStorage.getItem('admin-token'),
            },
            success: function(data){
                if (data.code == 200) {
                    str = '';
                    var length = data.data['length'];
                    for(var i=0; i<length; i++){
                        // console.log(data.data[i])
                        datas = data.data[i];
                        id = i+1;
                        str += '<tr><td>' + id + '</td><td>'+ datas.username +'</td><td>'+datas.email+'</td><td>'+datas.address+'</td><td>'+datas.phone+'</td><td><a href="javascript:void(0)" onclick="showEditModal('+datas.id+')">修改</a><a href="javascript:void(0)" onclick="showDeleteModal('+datas.id+')">删除</a></td></tr>'
                    }
                    $("tbody").html(str);
                }
            }
        })

    function exit(){
        localStorage.removeItem('admin-token');
        if (! localStorage.getItem('admin-token')) {
            window.location.href = '../login.html';
        }
    }
</script>
</body>
</html>